<div class="container mx-auto px-4 py-8 max-w-7xl">
    

    <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
        <h2 class="text-2xl font-semibold text-gray-800">Gestión de Clientes</h2>
        <div class="flex items-center gap-3 w-full md:w-auto">
            <div class="relative flex-1 md:flex-none">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                    <i class="fas fa-search"></i>
                </span>
                <input 
                    type="text" 
                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                    placeholder="Buscar clientes..." 
                    (input)="onSearch($event)">
            </div>
      <button [routerLink]="['/cliente']" [queryParams]="{ new: true }" class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all shadow-md">
        <i class="fas fa-plus"></i>
        <span>Nuevo Cliente</span>
      </button>
        </div>
    </div>

    <div class="flex flex-wrap gap-2 mb-6">
        <button 
            class="px-4 py-2 rounded-lg border-2 transition-all"
            [ngClass]="{'border-blue-600 bg-blue-600 text-white': true, 'border-blue-200 bg-white text-blue-600 hover:bg-blue-50': false}"
            (click)="filterByType('')">
            Todos
        </button>
        <button 
            class="px-4 py-2 rounded-lg border-2 border-blue-200 text-blue-600 hover:bg-blue-50 transition-all"
            (click)="filterByType('PARTICULAR')">
            Particulares
        </button>
        <button 
            class="px-4 py-2 rounded-lg border-2 border-blue-200 text-blue-600 hover:bg-blue-50 transition-all"
            (click)="filterByType('EMPRESA')">
            Empresas
        </button>
        <button 
            class="px-4 py-2 rounded-lg border-2 border-blue-200 text-blue-600 hover:bg-blue-50 transition-all"
            (click)="filterByType('VIP')">
            VIP
        </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div *ngFor="let cliente of clientesFiltrados" class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="flex items-center gap-4 p-4 border-b border-gray-100">
                <div class="w-12 h-12 rounded-full bg-blue-600 text-white flex justify-center items-center font-semibold text-lg shadow-md">
                    {{cliente.persona.nombre.charAt(0)}}{{cliente.persona.apellidoPaterno.charAt(0)}}
                </div>
                <div>
                    <h5 class="text-lg font-semibold text-gray-800">{{cliente.persona.nombre}} {{cliente.persona.apellidoPaterno}}</h5>
                    <small class="text-gray-500">ID: {{cliente.id || 'N/A'}}</small>
                </div>
            </div>
            <div class="p-4">
                <ul class="space-y-2">
                    <li *ngIf="cliente.persona.apellidoMaterno" class="text-gray-700">
                        <strong class="font-medium">Apellido Materno:</strong> {{cliente.persona.apellidoMaterno}}
                    </li>
                    <li *ngIf="cliente.persona.correo" class="text-gray-700">
                        <strong class="font-medium">Correo:</strong> {{cliente.persona.correo}}
                    </li>
                    <li *ngIf="cliente.persona.telefono" class="text-gray-700">
                        <strong class="font-medium">Teléfono:</strong> {{cliente.persona.telefono}}
                    </li>
                    <li class="text-gray-700">
                        <strong class="font-medium">Tipo:</strong> 
                        <span class="inline-block px-3 py-1 text-sm rounded-full font-medium" 
                            [ngClass]="{
                                'bg-blue-100 text-blue-800': !cliente.tipoCliente || cliente.tipoCliente === 'PARTICULAR',
                                'bg-cyan-100 text-cyan-800': cliente.tipoCliente === 'EMPRESA',
                                'bg-amber-100 text-amber-800': cliente.tipoCliente === 'VIP'
                            }">
                            {{cliente.tipoCliente || 'PARTICULAR'}}
                        </span>
                    </li>
                </ul>
            </div>
            <div class="p-4 border-t border-gray-100 flex justify-between gap-3">
                <button class="flex-1 px-4 py-2 text-sm border border-emerald-600 text-emerald-600 rounded-lg hover:bg-emerald-50 transition-all">
                    <i class="fas fa-edit mr-2"></i> Editar
                </button>
                <button class="flex-1 px-4 py-2 text-sm border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-all">
                    <i class="fas fa-trash mr-2"></i> Eliminar
                </button>
            </div>
        </div>

        <div *ngIf="clientesFiltrados.length === 0" class="col-span-full py-12 text-center">
            <i class="fas fa-users text-5xl text-gray-400 mb-4"></i>
            <h3 class="text-2xl font-semibold text-gray-800 mb-2">No se encontraron clientes</h3>
            <p class="text-gray-600 mb-6">Intenta ajustar los filtros o agregar nuevos clientes</p>
            <button [routerLink]="['/cliente']" [queryParams]="{ new: true }" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all shadow-md">
                <i class="fas fa-plus mr-2"></i> Agregar primer cliente
            </button>
        </div>
    </div>
    
    <!-- Modal de creación (simple) -->
    <div *ngIf="showCreateForm" class="fixed inset-0 flex items-center justify-center z-50">
      <div class="absolute inset-0 bg-black opacity-40" (click)="closeCreateModal()"></div>
      <div class="bg-white rounded-lg shadow-lg w-full max-w-md z-50 p-6">
        <h3 class="text-xl font-semibold mb-4">Crear nuevo cliente</h3>
        <form (ngSubmit)="createCliente()">
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700">Nombre</label>
            <input type="text" class="w-full mt-1 p-2 border rounded" placeholder="Nombre" [(ngModel)]="newCliente.persona.nombre" name="nombre">
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700">Apellido Paterno</label>
            <input type="text" class="w-full mt-1 p-2 border rounded" placeholder="Apellido Paterno" [(ngModel)]="newCliente.persona.apellidoPaterno" name="apellidoPaterno">
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700">Correo</label>
            <input type="email" class="w-full mt-1 p-2 border rounded" placeholder="correo@ejemplo.com" [(ngModel)]="newCliente.persona.correo" name="correo">
          </div>
          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700">Teléfono</label>
            <input type="text" class="w-full mt-1 p-2 border rounded" placeholder="Teléfono" [(ngModel)]="newCliente.persona.telefono" name="telefono">
          </div>
          <div class="flex justify-end gap-2">
            <button type="button" (click)="closeCreateModal()" [disabled]="isSubmitting" class="px-4 py-2 rounded border">Cancelar</button>
            <button type="submit" [disabled]="isSubmitting" class="px-4 py-2 rounded bg-blue-600 text-white">
              <span *ngIf="!isSubmitting">Guardar</span>
              <span *ngIf="isSubmitting">Guardando...</span>
            </button>
          </div>
        </form>
      </div>
    </div>
</div>

<script>
    // Este script es solo para demostración sin Angular
    document.addEventListener('DOMContentLoaded', function() {
      // Datos de ejemplo para la demostración
      const clientesEjemplo = [
        {
          id: 1,
          persona: {
            nombre: "María",
            apellidoPaterno: "García",
            apellidoMaterno: "López",
            correo: "maria.garcia@email.com",
            telefono: "+34 612 345 678"
          },
          tipoCliente: "PARTICULAR"
        },
        {
          id: 2,
          persona: {
            nombre: "Juan",
            apellidoPaterno: "Martínez",
            apellidoMaterno: "Sánchez",
            correo: "juan.martinez@empresa.com",
            telefono: "+34 645 987 654"
          },
          tipoCliente: "EMPRESA"
        },
        {
          id: 3,
          persona: {
            nombre: "Ana",
            apellidoPaterno: "Rodríguez",
            apellidoMaterno: "Fernández",
            correo: "ana.rodriguez@email.com",
            telefono: "+34 678 123 456"
          },
          tipoCliente: "VIP"
        },
        {
          id: 4,
          persona: {
            nombre: "Carlos",
            apellidoPaterno: "Hernández",
            apellidoMaterno: "Díaz",
            correo: "carlos.hernandez@email.com",
            telefono: "+34 611 222 333"
          }
          // tipoCliente no definido (será PARTICULAR por defecto)
        }
      ];

      // Renderizar clientes
      const clientesGrid = document.querySelector('.row.g-4');
      const filterButtons = document.querySelectorAll('.btn-group .btn');
      const searchInput = document.querySelector('.input-group input');
      
      let clientesFiltrados = [...clientesEjemplo];
      let filtroTipo = '';
      let terminoBusqueda = '';
      
      // Funciones de filtrado
      function filtrarClientes() {
        clientesFiltrados = clientesEjemplo.filter(cliente => {
          // Filtrar por tipo
          const tipo = cliente.tipoCliente || 'PARTICULAR';
          const coincideTipo = !filtroTipo || tipo === filtroTipo;
          
          // Filtrar por búsqueda
          const nombreCompleto = `${cliente.persona.nombre} ${cliente.persona.apellidoPaterno} ${cliente.persona.apellidoMaterno || ''}`.toLowerCase();
          const coincideBusqueda = !terminoBusqueda || nombreCompleto.includes(terminoBusqueda.toLowerCase());
          
          return coincideTipo && coincideBusqueda;
        });
        
        renderClientes();
      }
      
      function renderClientes() {
        // Limpiar grid
        const cards = document.querySelectorAll('.card.shadow-sm');
        cards.forEach(card => card.remove());
        
        const emptyState = document.querySelector('.text-center.py-5');
        if (emptyState) emptyState.remove();
        
        // Agregar clientes filtrados
        if (clientesFiltrados.length === 0) {
          const emptyStateHTML = `
            <div class="text-center py-5">
              <i class="fas fa-users fa-3x text-muted"></i>
              <h3 class="mt-3">No se encontraron clientes</h3>
              <p class="text-muted">Intenta ajustar los filtros o agregar nuevos clientes</p>
              <button class="btn btn-primary">
                <i class="fas fa-plus"></i> Agregar primer cliente
              </button>
            </div>
          `;
          clientesGrid.innerHTML += emptyStateHTML;
          return;
        }
        
        clientesFiltrados.forEach(cliente => {
          const tipo = cliente.tipoCliente || 'PARTICULAR';
          let tipoClass = 'tipo-particular';
          
          if (tipo === 'EMPRESA') tipoClass = 'tipo-empresa';
          if (tipo === 'VIP') tipoClass = 'tipo-vip';
          
          const cardHTML = `
            <div class="col-md-6 col-lg-4">
              <div class="card shadow-sm">
                <div class="card-header d-flex align-items-center gap-3">
                  <div class="rounded-circle bg-primary text-white d-flex justify-content-center align-items-center" style="width: 50px; height: 50px;">
                    ${cliente.persona.nombre.charAt(0)}${cliente.persona.apellidoPaterno.charAt(0)}
                  </div>
                  <div>
                    <h5 class="card-title mb-0">${cliente.persona.nombre} ${cliente.persona.apellidoPaterno}</h5>
                    <small class="text-muted">ID: ${cliente.id || 'N/A'}</small>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="list-unstyled mb-0">
                    ${cliente.persona.apellidoMaterno ? `
                      <li>
                        <strong>Apellido Materno:</strong> ${cliente.persona.apellidoMaterno}
                      </li>
                    ` : ''}
                    ${cliente.persona.correo ? `
                      <li>
                        <strong>Correo:</strong> ${cliente.persona.correo}
                      </li>
                    ` : ''}
                    ${cliente.persona.telefono ? `
                      <li>
                        <strong>Teléfono:</strong> ${cliente.persona.telefono}
                      </li>
                    ` : ''}
                    <li>
                      <strong>Tipo:</strong> 
                      <span class="badge bg-secondary ${tipoClass}">
                        ${tipo}
                      </span>
                    </li>
                  </ul>
                </div>
                <div class="card-footer d-flex justify-content-between">
                  <button class="btn btn-outline-success btn-sm">
                    <i class="fas fa-edit"></i> Editar
                  </button>
                  <button class="btn btn-outline-danger btn-sm">
                    <i class="fas fa-trash"></i> Eliminar
                  </button>
                </div>
              </div>
            </div>
          `;
          
          clientesGrid.innerHTML += cardHTML;
        });
      }
      
      // Event listeners para filtros
      filterButtons.forEach(button => {
        button.addEventListener('click', function() {
          filterButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          
          filtroTipo = this.textContent.trim();
          if (filtroTipo === 'Todos') filtroTipo = '';
          
          filtrarClientes();
        });
      });
      
      // Event listener para búsqueda
      searchInput.addEventListener('input', function() {
        terminoBusqueda = this.value;
        filtrarClientes();
      });
      
      // Renderizar inicialmente
      renderClientes();
    });
  </script>